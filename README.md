# Drive Constructor

An open source educational tool for electrical engineers.

## Usage

You need to install the latest long term support version (LTS) of [Node.js](https://nodejs.org/en). It is avaialble for Linx, macOS and Windows.

Before you start, you need to install Node packages required by the application by running the following command in the terminal:

    > npm install

Note: everytime there are changes in `package.json`, you need to run this command again.

If you want to run end-to-end tests you will also need to install [playwright](https://playwright.dev/) dependencies:

    > npx playwright install

Run the following command to start the application in the development mode:

    > npm run dev

You can navigate to the output URL to work with the application. Everytime you make changes in the code, the application in the browser will be automatically updated.

Run the following command to build the application for production use:

    npm run build

The build generates a static website in the `out` directory.

Run the follow to perform end-to-end tests on the pre-built application:

    > npm run test:e2e

The tests are run in a headless browser.

## Deployment

The website generated by the build command is automatically deployed to GitHub pages. The application is servered from the root directory.

The GitHub action [workflow](.github/workflows/main.yaml) running on merge to the `main` branch pushes the content of the `out` directory to a staging repository.

The staging repositroy location is set in the `STAGING_REPO` [environment variable](https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/store-information-in-variables) for your code repository. If this variable is not set, the GitHub action workflow deployment job is skipped.

The deployment job uses a GitHub's personal user access token to push contents of the `out` directory to the main branch of the staging repository. The token is set in the`GH_PAT` repository secret variable, and it must have [content permission](https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/controlling-permissions-for-github_token) for the target staging repository

## Reference implementation

The refernce implementation for [drivconstructor/drivconstructor](https://github.com/driveconstructor/driveconstructor) repository is deployed to the following domains:

|            |                                             |
| ---------- | ------------------------------------------- |
| staging    | https://driveconstructor-staging.github.io/ |
| production | https://driveconstructor.github.io/         |

## Lisense

See the [LICENSE](LICENSE) file for license rights and limitations (Apache 2.0).
